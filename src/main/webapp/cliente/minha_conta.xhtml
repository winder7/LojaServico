<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <h:body>
        <ui:composition template="/templates/template_03.xhtml">
            <ui:define name="title">Minha Conta</ui:define>        
            <ui:define name="left">
                <p:panel header="Opções" style="height: 100%">
                    <p:commandLink action="#{minhaContaCtrl.alteraMenu('minhaConta')}" update="form">
                        <h:outputText styleClass="menu-icon fa fa-user"/>
                        <h:outputText styleClass="menu-item" value="  Minha Conta"/>
                    </p:commandLink>
                    <br></br>
                    <p:commandLink action="#{minhaContaCtrl.alteraMenu('meusPedidos')}" update="form">
                        <h:outputText styleClass="menu-icon fa fa-archive"/>
                        <h:outputText styleClass="menu-item" value="  Meus Pedidos"/>
                    </p:commandLink>
                </p:panel>
            </ui:define>
            <ui:define name="content">
                <h:form id="form" class="form">
                    <p:panel rendered="#{'minhaConta'.equals(minhaContaCtrl.menu)}" style="overflow: hidden"  header="Minha Conta">
                        olá eu sou sua conta
                    </p:panel>

                    <p:panel rendered="#{'meusPedidos'.equals(minhaContaCtrl.menu)}" style="overflow: hidden"  header="Meus Pedidos">
                        <p:dataTable paginatorPosition="top" resizableColumns="true" id="tbl" var="f" value="#{minhaContaCtrl.lista}"
                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink}
                                     {PageLinks} {NextPageLink} {LastPageLink}"
                                     paginator="true" rows="10" style="margin-bottom:20px">
                            <p:column headerText="Código" sortBy="#{f.id}"  width="8%" style="text-align: center">
                                <h:outputText value="#{f.id}"/>
                            </p:column>
                            <p:column headerText="Data de Emissão" sortBy="#{f.dataEmissao}" width="18%" style="text-align: center">
                                <h:outputText value="#{f.dataEmissao}"/>
                            </p:column>
                            <p:column headerText="Data da Autorização" sortBy="#{f.dataAutorizacao}" width="18%" style="text-align: center">
                                <h:outputText value="#{f.dataAutorizacao}"/>
                            </p:column>
                            <p:column headerText="Status" sortBy="#{f.status}" width="10%" style="text-align: center">
                                <h:outputText value="#{f.status}"/>
                            </p:column>
                            <p:column headerText="Total em produtos" sortBy="#{f.totalProduto}" width="20%" style="text-align: center">
                                <h:outputText value="#{f.totalProduto}"/>
                            </p:column>
                            <p:column headerText="Total em serviços" sortBy="#{f.totalServico}" width="15%" style="text-align: center">
                                <h:outputText value="#{f.totalServico}"/>
                            </p:column>
                            <p:column headerText="Total geral" sortBy="#{f.totalGeral}" width="10%" style="text-align: center">
                                <h:outputText value="#{f.totalGeral}"/>
                            </p:column>
                            <p:column headerText="Desconto" sortBy="#{f.desconto}" width="10%" style="text-align: center">
                                <h:outputText value="#{f.desconto}"/>
                            </p:column>
                            <p:column style="width:32px;text-align: center">
                                <p:commandButton  icon="pi pi-search" title="View" action="#{produtoCtrl.listaImagemsProduto()}">
                                    <f:setPropertyActionListener value="#{f}" target="#{produtoCtrl.produto}"/>
                                </p:commandButton>
                            </p:column>
                        </p:dataTable>
                    </p:panel>
                </h:form>
            </ui:define>
        </ui:composition>
    </h:body>
</html>
