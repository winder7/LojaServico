<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <link rel="shortcut icon" href="../resources/img/favicon.png"/>
        <title>Lista de Formas de Pagamento</title>
    </h:head>
    <h:body >
        <div id="header">
            <ui:insert name="template" >
                <ui:include src="/templates/template.xhtml" />
            </ui:insert>
        </div>
        <style type="text/css">
            .label {
                width:20%;
                padding:4px;
            }

            .value {
                width:80%;
                padding:4px;
            }

            .grid {
                width:100%;
            }

            .error {
                color: red;
            }

            .outputLabel {
                font-weight: bold;
            }

            .grid {
                width:33%;
                padding:4px;
            }
        </style>

        <h:form id="form">
            <p:growl id="growl" sticky="true" showDetail="true"/>

            <p:wizard flowListener="#{pessoaCtrl.onFlowProcess}" backLabel="Voltar" nextLabel="Próximo" >
                <p:tab id="login" title="Login">
                    <p:panel header="Dados de Login">
                        <p:messages />
                        <h:panelGrid columns="2" columnClasses="label, value">
                            <h:outputText value="Email: *" />
                            <p:inputText required="true" size="30"  value="#{pessoaCtrl.pessoa.email}" requiredMessage="Por favor insira o email."  validatorMessage="E-mail invalido">
                                <f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$"/>
                            </p:inputText>

                            <h:outputText value="Senha: *" />
                            <p:password required="true" value="#{pessoaCtrl.pessoa.senha}" maxlength="32" feedback="true" promptLabel="Insira sua senha"
                                        weakLabel="Fraca"  goodLabel="Média" strongLabel="Forte" requiredMessage="Inserir sua senha"/>

                            <h:outputText value="Repetir Senha: *" />
                            <p:password required="true" value="#{pessoaCtrl.pessoa.senha}" maxlength="32" feedback="true" promptLabel="Insira sua senha"
                                        weakLabel="Fraca"  goodLabel="Média" strongLabel="Forte" requiredMessage="Confirme sua senha"/>
                        </h:panelGrid>
                    </p:panel>
                </p:tab>

                <p:tab id="personal" title="Pessoal">
                    <p:panel header="Dados Pessoais">
                        <p:messages />
                        <h:panelGrid id="panel" columns="2" columnClasses="label, value">
                            <p:outputLabel for="perfil" value="Perfil:" />
                            <p:selectOneRadio id="perfil" value="#{pessoaCtrl.tipopessoa}" unselectable="true">
                                <f:selectItem itemLabel="Pessoa Física" itemValue="PF" />
                                <f:selectItem itemLabel="Pessoa Jurídica" itemValue="PJ" />
                                <p:ajax event="change" update="panel"/>
                            </p:selectOneRadio>
                            <h:outputText value="Nome Completo: *" />
                            <p:inputText value="#{pessoaCtrl.pessoa.nome}" size="30" required="true" label="Nome Completo"/>

                            <h:outputText value="#{pessoaCtrl.tipopessoa == 'PF' ? 'CPF: *' : 'CNPJ: *'}" />
                            <p:inputText value="#{pessoaCtrl.pessoa.cpf}" size="30" required="true" label="#{pessoaCtrl.tipopessoa == 'PF' ? 'CPF: *' : 'CNPJ: *'}"/>

                            <h:outputText value="#{pessoaCtrl.tipopessoa == 'PF' ? 'RG: *' : 'Inscrição Estadual: *'}" />
                            <p:inputText value="#{pessoaCtrl.pessoa.rg}" size="30" required="true" label="#{pessoaCtrl.tipopessoa == 'PF' ? 'RG: *' : 'Inscrição Estadual: *'}"/>
                            <h:outputText value="Data de Nascimento: *" />
                            <p:calendar value="#{pessoaCtrl.pessoa.dataNasc}" size="11" pattern="dd/MM/yyyy"/>
                        </h:panelGrid>
                    </p:panel>
                </p:tab>

                <p:tab id="address" title="Endereço">
                    <p:panel header="Dados de Endereço">
                        <p:messages />
                        <h:panelGrid columns="2" id="endereco" columnClasses="label, value">
                            <h:outputText value="CEP: " />
                            <p:inputText value="#{pessoaCtrl.pessoa.cep}" size="9" maxlength="9">
                                <p:ajax event="blur" update="endereco" listener="#{pessoaCtrl.BuscaCep()}"/>
                            </p:inputText>

                            <h:outputText value="Rua: " />
                            <p:inputText value="#{pessoaCtrl.pessoa.rua}" size="60" maxlength="60"/>

                            <h:outputText value="Bairro: " />
                            <p:inputText value="#{pessoaCtrl.pessoa.bairro}" size="30" maxlength="30"/>

                            <h:outputText value="Cidade: " />
                            <p:inputText value="#{pessoaCtrl.pessoa.cidade}" size="30" maxlength="30"/>

                            <h:outputText value="UF: " />
                            <p:inputText value="#{pessoaCtrl.pessoa.uf}" size="2" maxlength="2"/>
                        </h:panelGrid>
                    </p:panel>
                </p:tab>

                <p:tab id="contact" title="Contato">
                    <p:panel header="Telefones de Contato">
                        <p:messages />
                        <h:panelGrid columns="2" >
                            <h:dataTable id="listaFones" value="#{pessoaCtrl.pessoa.fones}" var="f" rules="rows">
                                <f:facet name="header">
                                    <p:commandButton value="Adicionar Telefone" update=":form"
                                                     actionListener="#{pessoaCtrl.actionInserirFone()}"/>
                                </f:facet>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputLabel value="Número"/>
                                    </f:facet>
                                    <p:inputMask value="#{f.numero}" mask="(99)9999-9999"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputLabel value="Descrição"/>
                                    </f:facet>
                                    <p:inputText value="#{f.descricao}" size="30" maxlength="30"/>
                                </h:column>
                                <h:column>
                                    <p:commandButton value="Remover" update=":form" actionListener="#{pessoaCtrl.actionExcluirFone()}">
                                        <f:setPropertyActionListener value="#{f}" target="#{pessoaCtrl.fone}"/>
                                    </p:commandButton>
                                </h:column>
                            </h:dataTable>
                        </h:panelGrid>
                    </p:panel>
                </p:tab>

                <p:tab id="confirm" title="Confirmação">
                    <p:panel header="Confirmação dos Dados Informados">
                        <h:panelGrid id="confirmation" columns="3" columnClasses="grid,grid,grid">
                            <h:panelGrid columns="2" columnClasses="label, value">
                                <h:outputText value="Email: " />
                                <h:outputText value="#{pessoaCtrl.pessoa.email}" styleClass="outputLabel"/>

                                <h:outputText value="Senha: " />
                                <h:outputText value="#{pessoaCtrl.pessoa.senha != null ? 'OK' : 'Falha'}" styleClass="outputLabel"/>

                                <h:outputText value="Confirmação Senha: " />
                                <h:outputText value="#{pessoaCtrl.pessoa.senha != null ? 'OK' : 'Falha'}" styleClass="outputLabel"/>
                            </h:panelGrid>

                            <h:panelGrid columns="2" columnClasses="label, value">
                                <h:outputText value="Nome: " />
                                <h:outputText value="#{pessoaCtrl.pessoa.nome}" styleClass="outputLabel"/>

                                <h:outputText value="#{pessoaCtrl.tipopessoa == 'PF' ? 'CPF:' : 'CNPJ:'}" />
                                <h:outputText value="#{pessoaCtrl.pessoa.cpf}" styleClass="outputLabel"/>

                                <h:outputText value="#{pessoaCtrl.tipopessoa == 'PF' ? 'RG:' : 'Inscrição Estadual:'}" />
                                <h:outputText value="#{pessoaCtrl.pessoa.rg}" styleClass="outputLabel"/>

                                <h:outputText value="Data de Nascimento:" />
                                <h:outputText value="#{pessoaCtrl.formatarData(pessoaCtrl.pessoa.dataNasc)}" styleClass="outputLabel"/>
                            </h:panelGrid>

                            <h:panelGrid columns="2" columnClasses="label, value">
                                <h:outputText value="Rua: " />
                                <h:outputText value="#{pessoaCtrl.pessoa.rua}" styleClass="outputLabel"/>

                                <h:outputText value="Bairro: " />
                                <h:outputText value="#{pessoaCtrl.pessoa.bairro}" styleClass="outputLabel"/>

                                <h:outputText value="CEP: " />
                                <h:outputText value="#{pessoaCtrl.pessoa.cep}" styleClass="outputLabel"/>

                                <h:outputText value="Cidade: " />
                                <h:outputText value="#{pessoaCtrl.pessoa.cidade}" styleClass="outputLabel"/>

                                <h:outputText value="UF: " />
                                <h:outputText value="#{pessoaCtrl.pessoa.uf}" styleClass="outputLabel"/>
                            </h:panelGrid>
                        </h:panelGrid>

                        <h:panelGrid columns="2" >
                            <p:commandButton value="Criar Conta" action="#{pessoaCtrl.actionGravar}" update="form"/>
                            <p:button value="Cancelar" href="#{request.contextPath}/publico/index.xhtml"/>
                        </h:panelGrid>
                    </p:panel>
                </p:tab>
            </p:wizard>
        </h:form>
    </h:body>
</html>
